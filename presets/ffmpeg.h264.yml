# default h264 options
# other presets can override these settings

h264:

# GENERAL
  f: 'mov'      # format
  r: 15         # framerate
  
# AUDIO  
  acodec: 'libfaac'  
  ab: '128k'

# -----------
# COMPRESSION

  vcodec: 'libx264'  

  # Entropy coder
  # 0: CAVLC
  # 1: CABAC
  # CABAC not allowed in baseline (must use 0)
  # 10-15% better compression   slower
  coder: 1  

  # Enable/disable loop filter
  # rec: +loop
  flags: '+loop'  

  # ?
  cmp: 'chroma'  

  # G: gop length (== keyframe interval == keyint)
  # max distance between i-frames
  # rec default: 250
  # note: in flash, can only scrub to keyframes
  g: 30

  # KEYINT (keyframes interval)
  # rec default: 25
  keyint_min: 15

  # Scenecut detection
  # default 40: doesn't need to be changed
  sc_threshold: 40  

  # REFERENCE FRAMES (H.264)
  # reference frames other than the one immediately prior
  # good default: 6   max value: 16
  # change for different profiles (1 = need for low complex profile)
  refs: 3  

  # Max B-frames (MPEG 1/2/4 only)
  # Not supported by Baseline Profile
  bf: 3  

# ----------------
# RATE CONTROL

  # TARGET BITRATE
  # should always be used in 2-pass mode
  b: '1500k'    # bitrate

  # BITRATE TOLERANCE
  # allowed variable of average bitrate
  bt: '1500k'  

  # QUANTIZER SCALE (VBR only)
  qmin: 10          # good default
  qmax: 51          # good default
  qcomp: 0.6        # compression: 0 = good stills   1 = good motion   .6 = default
  qdiff: 4          # max diff between quantizer scales
  i_qfactor: 0.71   # qp factor between P- and I-frames   

  # RATE CONTROL EQUATION
  # http://ffmpeg.mplayerhq.hu/ffmpeg-doc.html#SEC17
  rc_eq: 'blurCplx^(1-qComp)'  

# ------------------
# ANALYSIS

  # PARTITIONS
  # inter/intra partitions to analyze
  # i8x8 only allowed in High Profile mode
  partitions: '+parti4x4+partp8x8+partb8x8'  

  # TRELLIS: trellis RD quantization
  # 0 = disabled   1 = higher qual   slower   2 = max qual   very slow
  # requires CABAC
  trellis: 1  

  # FLAGS2
  # dct8x8: allows choosing betwee 8x8 and 4x4.  High Profile only
  flags2: '+wpred+dct8x8+mixed_refs'  

  # *ME (motion estimation)
  # hex = normal   umh = high   40% slower
  # 
  me: 'umh'  
  me_range: 16  

  # *SUBQ: time v. quality
  # 5 = normal   6 = high   7 = best (35% slower)
  subq: 6  


# ======================
# http://www.flashcomguru.com/index.cfm/2008/2/2/jaw-drop-h264
first_pass_overrides:
  subq: 1  
  me: 'hex'  
  partitions: 0  
  trellis: 0  
  flags2: '+mixed_refs'

